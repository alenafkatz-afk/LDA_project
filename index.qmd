---
title: "LDA_project"
author: "a-f-katz"
date: today
date-format: D.MM.YYYY
abstract: "Первый подход к анализу большого корпуса интервью. Тренируемся на маленьком"
bibliography: references.bib
format:
  html:
    embed-resources: true
    standalone: true
    toc: true
    code-fold: true
---

## Описание корпуса

С 2022 г. мне довелось участвовать в довольно масштабном исследовании общины горских евреев г. Пятигорска. Еврейская община г. Пятигорска представляет собой интересную картину с точки зрения миграционных процессов: с одной стороны, это молодая, активно развивающаяся община, ставшая в 1990-е и 20000-е направлением миграции для горских евреев Кавказа, с другой, Пятигорск стал промежуточным пунктом на пути более удаленных направлений миграций.

В ходе исследования мы провели ряд экспедиций в Пятигорске и окрестностях, всего было собрано порядка 300 интервью, некоторые из которых занимают более 3 часов записей. Как правило, это неструктурированные интервью, в котором собиратель хоть и задает своему собеседнику вопросы, но не настаивает на конкретной теме и следует, скорее, логике беседы, чем заранее подготовленному опроснику.

На данный момент экспедиционная часть исследования практически подошла к концу, участники экспедиций уже сделали ряд докладов и опубликовали ряд текстов по полученным материалам. Однако, как это часто бывает с масштабными проектами, материал в полном его объеме сами участники экспедиций вряд ли смогут охватить своим вниманием в ближайшие годы. Соответственно, стоит задача превратить полученный архив экспедиций в корпус (не только текстовых) материалов, в которых сможет разобраться и гипотетический исследователь, не участвовавший в экспедициях, но желающий использовать материалы в своих работах. Естественно, обработка всего массива интервью - задача не одной недели и не одного месяца. Поэтому на данном этапе я решила сделать небольшой пробный заплыв.

Для пробного тематического анализа я взяла 10 случайных интервью из материалов 2022 года (не потому, что это особенный год, а потому, что за давностью этот год наиболее полно представлен в уже расшифрованных текстах). Все интервью довольно объемные (в основном, дольше 2 часов), что позволило мне надеяться, что я смогу выделить основные темы этих документов. Разумеется, в силу использования небольшого количества текстов для пробного анализа, речь не идет о каких-то откровениях. Наоборот, зная содержание тематических опросников, на которые могли ориентироваться собиратели, и участвуя в ряде этих интервью в качестве собирателя, я расчитываю на то, что знакомство с материалом позволит мне лучше определить адекватность отображаемых результатов.

## Подготовка материалов

Имеющиеся в моем распоряжении расшифровки 10 интервью были сохранены. Подготовка текстов к анализу не представляла из себя ничего сверхъестественного[^1]:

[^1]: Методы воспроизводимых исследований подробно описаны в курсе [@TextAnalysisLocusClassicus2024].

1.  из текстов были удалены специальные символы

2.  все слова приведены к нижнему регистру

3.  удалены лишние пробелы

    ``` r
    texts_clean <- texts |> 
      mutate(
        # Удаляем специальные символы, но сохраняем буквы
        text = gsub("[^[:alnum:][:space:]]", " ", text),

        # Приводим к нижнему регистру
        text = tolower(text),

        # Удаляем лишние пробелы
        text = str_squish(text)
      )
    ```

4.  проведена токенизация

5.  аннотирование (без синтаксического анализа) при помощи udpipe

6.  лемматизация (с сохранением только существительных и прилагательных - выбор был сделан после нескольких не очень удачных попыток анализа с использованием также глаголов и имен собственных)

    ![Наиболее популярные леммы](Леммы.png)

7.  удаление слишком редких и слишком частых слов (с параметрами min_docfreq = 0.08, и max_docfreq = 0.7, полученными, в том числе, и опытным путем)

8.  удаление нескольких "мусорных" слов - результата того, что некоторые тексты расшифровывались в свое время вручную, и расшифровщик использовал пометы (как "нрзб.") так и (зачем-то) переносы[^2]:

    ``` r
    rubbish_lemmas <- c(
      "соба", "бака", "ага", "щас", "тыще" 
    )   

    top_lemmas <- topfeatures(dfm_filtered, n = 50)

    top_lemmas_clean <- top_lemmas[!names(top_lemmas) %in% rubbish_lemmas]
    ```

[^2]: Безусловно, более опрятным было бы сделать текстовый документ с выделенными стоп-словами, однако в данном пробном забеге я позволила себе то решение, которое показалось мне более быстрым. При большом объеме данных настоятельно рекомендую сама себе не пренебрегать собственным советом

![Самые популярные леммы](lemm_top)В результате получился довольно презентабильный набор лемм (правда, меня до сих пор радует мысль, что udpipe сделал из "джуури" прекрасное слово "джууря", которое я собираюсь ввести в оборот среди коллег).

Посмотрим на не менее красивое облако слов из того же топа лемм.

![Топ лемм, которые будут использоваться для обучения модели](wordcloud)

## Обучение модели

Обучение модели LDA ожидаемо пришлось произвести много раз. Основным объектом подбора было количество тем: если ставить слишком много, они начинают расплываться и пересекаться, слишком мало - кажется, что все это одна большая тема. Путем проб и ошибок я выбрала число 6. Но, конечно, могу показать промежуточные рез

![Результат поиска 12 тем](12%20тем)

![Результат обучения на 4 темы](4%20темы)

## Результаты

Как я уже упоминала, оптимальным количеством тем, при котором темы, действительно, поддаются интерпретации, мне после нескольких проб представилось 6.

![Результаты тематического моделирования](6%20тем)

Представленный выше результат легко поддается интерпретации, если знать содержание интервью:

1.  Рассказы про активиста, который занимался установкой памятника евреям, расстрелянным под Богдановкой (частый ответ на расспросы про Холокост);

2.  Описание свадебных традиций;

3.  Семейные истории - о родственниках и так называемой "общине исхода";

4.  Рассказ про профессии и особенности бизнеса (значительное число горских евреев в регионе Минеральных вод занимались в свое время мехозаготовками, а позже продажей шуб);

    ![Пятигорские меха](шубы.jpg)

5.  Рассказ про еврейскую общину в Кисловодске (в которой всей основной общинной деятельностью занимаются ашкеназы, точнее - 3 активные дамы-ашкеназки);

Рассказ про синагогу горских евреев в Пятигорске (первая синагога появилась на ул.Шоссейная) и про то, как все печалятся о погибшем идейном вдохновителе ее строительства.

Для пущей наглядности я подписала темы в полученном графике.

![Темы](Темы%20подписанные.png.png)

Так как интересует меня в первую очередь не красивая визуализация того, что я и так знаю из [качественного анализа интервью](https://slavsjewsculture.org/index.php/sjc/article/view/160/160) и опросников, а возможность в дальнейшем сделать обширные материалы удобными для исследователей, я решила попробовать посмотреть и на то, как темы распределены по имеющимся интервью. Для 10 интервью это, понятное дело, не играет особой практической значимости: прочитать или прослушать их, вероятно, проще, чем произвести все вышеописанное. Но я надеюст на то, что при обучении на значительно большем количестве документов результаты будут и более показательными и более полезными.

![Самые популярные темы в конкретных документах](Распределение%20тем%20по%20интервью)

## Выводы

В целом, я довольна полученными результатами. Мне удалось получить результаты, поддающиеся интерпретации, соответствующие моим знаниям о содержании документов. Я расчитываю использовать проверенные инструменты для обработки всего имеющегося в моем распоряжении объема документов, что должно позволить исследователям, не работавшим в экспедициях, получить наглядное представление о содержании документов и сделать непростой выбор о том, с каких документов им стоит начинать работу с архивом экспедиции по интересующей их теме.

Должна извиниться за то, что в силу достаточно чувствительной личной информации, содержащейся в некоторых документах, я не имею права делиться материалами, на которых я проверяла приемы тематического анализа текста. Однако, как мы надеемся, в ближайшие пару лет данные материалы станут частью большого цифрового архива Еврейского музея и центра толерантности, и с предварительно анонимизированными текстами можно будет ознакомиться и официально работать.
